C51 COMPILER V9.60.7.0   MAIN                                                              03/25/2024 22:48:42 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\KEIL-C51\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /**************************************************************************************
   2          深圳市普中科技有限公司（PRECHIN 普中）
   3          技术支持：www.prechin.net
   4          PRECHIN
   5           普中
   6          
   7          实验名称：定时器1实验
   8          接线说明：      
   9          实验现象：下载程序后，D1指示灯间隔1s闪烁
  10          注意事项：                                                                                                                                                                
  11          ***************************************************************************************/
  12          #include "reg52.h"
  13          
  14          typedef unsigned int u16;       //对系统默认数据类型进行重定义
  15          typedef unsigned char u8;
  16          
  17          //定义LED1管脚
  18          sbit LED1=P2^0;
  19          
  20          
  21          
  22          /*******************************************************************************
  23          * 函 数 名       : delay_10us
  24          * 函数功能               : 延时函数，ten_us=1时，大约延时10us
  25          * 输    入       : ten_us
  26          * 输    出       : 无
  27          *******************************************************************************/
  28          void delay_10us(u16 ten_us)
  29          {
  30   1              while(ten_us--);        
  31   1      }
  32          
  33          /*******************************************************************************
  34          * 函 数 名       : time1_init
  35          * 函数功能               : 定时器1中断配置函数，通过设置TH和TL即可确定定时时间
  36          * 输    入       : 无
  37          * 输    出       : 无
  38          *******************************************************************************/
  39          void time1_init(void)
  40          {
  41   1              TMOD|=0X10;//选择为定时器0模式，工作方式1
  42   1              TH1=0XFC;       //给定时器赋初值，定时1ms
  43   1              TL1=0X18;       
  44   1              ET1=1;//打开定时器1中断允许
  45   1              EA=1;//打开总中断
  46   1              TR1=1;//打开定时器              
  47   1      }
  48          
  49          /*******************************************************************************
  50          * 函 数 名       : main
  51          * 函数功能               : 主函数
  52          * 输    入       : 无
  53          * 输    出       : 无
  54          *******************************************************************************/
  55          void main()
C51 COMPILER V9.60.7.0   MAIN                                                              03/25/2024 22:48:42 PAGE 2   

  56          {       
  57   1              time1_init();//定时器1中断配置
  58   1      
  59   1              while(1)
  60   1              {                       
  61   2                                                              
  62   2              }               
  63   1      }
  64          
  65          void time1() interrupt 3 //定时器1中断函数
  66          {
  67   1              static u16 i;//定义静态变量i
  68   1              TH1=0XFC;       //给定时器赋初值，定时1ms
  69   1              TL1=0X18;
  70   1              i++;
  71   1              if(i==1000)
  72   1              {
  73   2                      i=0;
  74   2                      LED1=!LED1;     
  75   2              }                                               
  76   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     71    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
